<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The State of ConfigOps: Taming Full-Stack Sprawl</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }

        /* Chart Container Utilities */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Architecture Diagram Pulse Animation */
        @keyframes pulse-connection {
            0% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
            100% { opacity: 0.3; transform: scale(1); }
        }
        .connection-line {
            transition: all 0.3s ease;
        }
        .connection-active {
            stroke: #3b82f6;
            stroke-width: 3;
            animation: pulse-connection 2s infinite;
        }
        
        .feature-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
    <!-- Chosen Palette: "Warm Neutral Tech" -->
    <!-- Background: #f8fafc (Slate 50) - Warm neutral base -->
    <!-- Primary: #3b82f6 (Blue 500) - For tech/trust -->
    <!-- Secondary: #64748b (Slate 500) - For supporting text -->
    <!-- Accent: #f59e0b (Amber 500) - Subtle calls to action/warnings -->
</head>
<body class="bg-slate-50 text-slate-800 font-sans leading-relaxed">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur shadow-sm border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-3">
                    <div class="bg-blue-600 text-white p-2 rounded-lg">
                        <i class="fa-solid fa-layer-group text-xl"></i>
                    </div>
                    <span class="font-bold text-xl tracking-tight text-slate-900">ConfigOps<span class="text-blue-600">Report</span></span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <button onclick="scrollToSection('chaos')" class="text-slate-600 hover:text-blue-600 font-medium transition-colors">The Problem</button>
                    <button onclick="scrollToSection('solution')" class="text-slate-600 hover:text-blue-600 font-medium transition-colors">The Architecture</button>
                    <button onclick="scrollToSection('comparison')" class="text-slate-600 hover:text-blue-600 font-medium transition-colors">Comparison</button>
                    <button onclick="scrollToSection('roi')" class="text-slate-600 hover:text-blue-600 font-medium transition-colors">ROI Calc</button>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-btn" class="text-slate-600 hover:text-blue-600">
                        <i class="fa-solid fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-slate-100 p-4 shadow-lg absolute w-full">
            <div class="flex flex-col space-y-3">
                <button onclick="scrollToSection('chaos')" class="text-left text-slate-600 font-medium">The Problem</button>
                <button onclick="scrollToSection('solution')" class="text-left text-slate-600 font-medium">The Architecture</button>
                <button onclick="scrollToSection('comparison')" class="text-left text-slate-600 font-medium">Comparison</button>
                <button onclick="scrollToSection('roi')" class="text-left text-slate-600 font-medium">ROI Calc</button>
            </div>
        </div>
    </nav>

    <!-- Application Structure Plan: 
        1. Hero/Intro: Contextualize the "Config Sprawl" crisis.
        2. The Chaos (Data): Quantify the pain (Chart.js) to build urgency.
        3. The Solution (Interactive Diagram): Explain the "Agent-Database-Dashboard" model conceptually.
        4. Comparison Matrix: Direct feature comparison to separate "Old" (Dotenv) vs "New" (ConfigOps).
        5. ROI Calculator: Personalize the data for the user.
        Why? This structure moves from Problem -> Understanding -> Proof -> Personal Impact.
    -->

    <!-- Hero Section -->
    <header class="bg-white border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24 grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            <div>
                <div class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-amber-100 text-amber-800 mb-6">
                    <span class="animate-pulse mr-2">●</span> Emerging Tech Report
                </div>
                <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight mb-6">
                    Taming the <span class="text-blue-600">Configuration Sprawl</span>
                </h1>
                <p class="text-lg text-slate-600 mb-8 max-w-lg">
                    Discover how the new wave of open-source <strong>ConfigOps</strong> tools—unifying Agents, Databases, and Dashboards—is solving the "it works on my machine" crisis and hardcoded secret leaks.
                </p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <button onclick="scrollToSection('chaos')" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md transition-all">
                        Explore the Data
                    </button>
                    <button onclick="scrollToSection('solution')" class="px-6 py-3 bg-white hover:bg-slate-50 text-slate-700 border border-slate-300 font-semibold rounded-lg shadow-sm transition-all">
                        See the Solution
                    </button>
                </div>
            </div>
            <div class="relative bg-slate-100 rounded-2xl p-6 border border-slate-200 shadow-inner">
                <!-- Abstract Representation of Sprawl -->
                <div class="grid grid-cols-2 gap-4 opacity-80">
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-200">
                        <div class="flex items-center gap-2 mb-2 text-red-500 font-mono text-xs">
                            <i class="fa-solid fa-triangle-exclamation"></i> .env.local
                        </div>
                        <div class="h-2 w-full bg-slate-100 rounded mb-1"></div>
                        <div class="h-2 w-2/3 bg-slate-100 rounded"></div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-200 transform translate-y-4">
                        <div class="flex items-center gap-2 mb-2 text-amber-500 font-mono text-xs">
                            <i class="fa-solid fa-key"></i> AWS Secrets
                        </div>
                        <div class="h-2 w-full bg-slate-100 rounded mb-1"></div>
                        <div class="h-2 w-1/2 bg-slate-100 rounded"></div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-200 transform -translate-y-2">
                        <div class="flex items-center gap-2 mb-2 text-purple-500 font-mono text-xs">
                            <i class="fa-brands fa-github"></i> CI/CD Vars
                        </div>
                        <div class="h-2 w-full bg-slate-100 rounded mb-1"></div>
                        <div class="h-2 w-3/4 bg-slate-100 rounded"></div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-200">
                        <div class="flex items-center gap-2 mb-2 text-blue-500 font-mono text-xs">
                            <i class="fa-solid fa-database"></i> DB Flags
                        </div>
                        <div class="h-2 w-full bg-slate-100 rounded mb-1"></div>
                        <div class="h-2 w-2/3 bg-slate-100 rounded"></div>
                    </div>
                </div>
                <div class="absolute inset-0 flex items-center justify-center">
                    <div class="bg-white/90 backdrop-blur-md px-6 py-3 rounded-full shadow-lg border border-slate-200 font-bold text-slate-800">
                        <i class="fa-solid fa-arrow-right-long text-blue-600 mr-2"></i> Unified Graph
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Section: The Chaos (Problem Statement) -->
    <section id="chaos" class="py-16 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center max-w-3xl mx-auto mb-12">
                <h2 class="text-3xl font-bold text-slate-900 mb-4">The Cost of Configuration Chaos</h2>
                <p class="text-lg text-slate-600">
                    Why do we need a specialized agent and database? Because simple text files are failing us. 
                    Misconfigurations are now the #1 cause of cloud outages, outpacing code bugs.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                <!-- Text Context -->
                <div class="bg-white p-8 rounded-xl shadow-sm border border-slate-200 h-full">
                    <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center">
                        <i class="fa-solid fa-chart-pie text-blue-500 mr-3"></i> Sources of Downtime
                    </h3>
                    <p class="text-slate-600 mb-6">
                        Industry analysis reveals that while infrastructure is robust, the <em>configuration</em> of that infrastructure is fragile.
                        The "Human Error" slice is largely dominated by configuration drift and hardcoded secrets.
                    </p>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <div class="flex-shrink-0 w-6 h-6 rounded-full bg-red-100 flex items-center justify-center mt-1">
                                <span class="text-red-600 text-xs font-bold">1</span>
                            </div>
                            <div class="ml-3">
                                <h4 class="text-sm font-semibold text-slate-900">Config Drift</h4>
                                <p class="text-sm text-slate-500">Production environments slowly diverge from staging due to manual hotfixes.</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0 w-6 h-6 rounded-full bg-amber-100 flex items-center justify-center mt-1">
                                <span class="text-amber-600 text-xs font-bold">2</span>
                            </div>
                            <div class="ml-3">
                                <h4 class="text-sm font-semibold text-slate-900">Secret Leaks</h4>
                                <p class="text-sm text-slate-500">Hardcoded API keys in Git history (aka "Secret Sprawl").</p>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- Visualization: Chart.js Pie -->
                <div class="bg-white p-8 rounded-xl shadow-sm border border-slate-200">
                    <div class="chart-container">
                        <canvas id="outageChart"></canvas>
                    </div>
                    <div class="mt-4 text-center text-sm text-slate-500 italic">
                        Based on aggregated cloud incident reports (2024-2025).
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section: The Solution (Architecture Interactive) -->
    <section id="solution" class="py-16 bg-white border-t border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center max-w-3xl mx-auto mb-16">
                <h2 class="text-3xl font-bold text-slate-900 mb-4">The "ConfigOps" Architecture</h2>
                <p class="text-lg text-slate-600">
                    The modern open-source solution (e.g., Configu, Infisical) replaces scattered files with a unified three-tier architecture: 
                    <strong>Schema</strong> (Code), <strong>Store</strong> (Database), and <strong>Interface</strong> (Agent).
                </p>
                <div class="mt-6 inline-flex bg-slate-100 p-1 rounded-lg">
                    <span class="text-xs font-semibold uppercase tracking-wider text-slate-500 px-3 py-1">Interactive Diagram</span>
                </div>
            </div>

            <!-- Interactive Architecture Diagram -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 relative">
                <!-- Connecting Lines (Visual Only, Absolute positioned for LG screens) -->
                <div class="hidden lg:block absolute top-1/2 left-0 w-full h-2 -translate-y-1/2 z-0">
                    <div class="w-full h-1 bg-slate-200 rounded-full"></div>
                </div>

                <!-- Component 1: Schema -->
                <div class="relative z-10 group cursor-pointer" onclick="updateDetail('schema')">
                    <div class="bg-white p-6 rounded-xl border-2 border-slate-200 hover:border-blue-500 transition-all shadow-sm hover:shadow-md h-full flex flex-col items-center text-center">
                        <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4 text-2xl text-slate-600 group-hover:bg-blue-50 group-hover:text-blue-600 transition-colors">
                            <i class="fa-solid fa-file-code"></i>
                        </div>
                        <h3 class="text-xl font-bold text-slate-900 mb-2">1. The Code (Schema)</h3>
                        <p class="text-sm text-slate-600">A `.cfgu` or JSON schema file defining <em>what</em> configs exist, their types, and validation rules.</p>
                        <div class="mt-auto pt-4 text-blue-600 text-sm font-semibold opacity-0 group-hover:opacity-100 transition-opacity">
                            Click to Learn More
                        </div>
                    </div>
                </div>

                <!-- Component 2: Agent -->
                <div class="relative z-10 group cursor-pointer" onclick="updateDetail('agent')">
                    <div class="bg-white p-6 rounded-xl border-2 border-blue-500 shadow-lg scale-105 h-full flex flex-col items-center text-center">
                        <div class="absolute -top-3 bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide">The Agent</div>
                        <div class="w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mb-4 text-2xl text-blue-600 animate-pulse">
                            <i class="fa-solid fa-robot"></i>
                        </div>
                        <h3 class="text-xl font-bold text-slate-900 mb-2">2. The Agent (CLI/Proxy)</h3>
                        <p class="text-sm text-slate-600">The specialized binary that executes requests, fetching from stores and validating against the schema.</p>
                        <div class="mt-auto pt-4 text-blue-600 text-sm font-semibold">
                            (Active Orchestrator)
                        </div>
                    </div>
                </div>

                <!-- Component 3: Store/Dashboard -->
                <div class="relative z-10 group cursor-pointer" onclick="updateDetail('store')">
                    <div class="bg-white p-6 rounded-xl border-2 border-slate-200 hover:border-blue-500 transition-all shadow-sm hover:shadow-md h-full flex flex-col items-center text-center">
                        <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4 text-2xl text-slate-600 group-hover:bg-blue-50 group-hover:text-blue-600 transition-colors">
                            <i class="fa-solid fa-database"></i>
                        </div>
                        <h3 class="text-xl font-bold text-slate-900 mb-2">3. Store & Dashboard</h3>
                        <p class="text-sm text-slate-600">The "Database" (Vault, AWS SSM) storing values, and the "Dashboard" for visualization and management.</p>
                        <div class="mt-auto pt-4 text-blue-600 text-sm font-semibold opacity-0 group-hover:opacity-100 transition-opacity">
                            Click to Learn More
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detail Panel (Dynamic Content) -->
            <div id="detail-panel" class="mt-12 bg-slate-50 rounded-xl p-8 border border-slate-200 transition-all duration-300">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 id="detail-title" class="text-2xl font-bold text-slate-900 mb-4">Select a component above</h3>
                        <p id="detail-desc" class="text-slate-600 mb-6">
                            Interact with the diagram to understand how the Configuration-as-Code pipeline ensures consistency across environments.
                        </p>
                        <ul id="detail-list" class="space-y-3">
                            <!-- Dynamic List Items -->
                        </ul>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm text-green-400 overflow-x-auto shadow-inner flex flex-col justify-center">
                        <div id="detail-code">
                            <span class="text-slate-500">// Click a component to see the workflow logic</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section: Comparison Matrix -->
    <section id="comparison" class="py-16 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-12 flex flex-col md:flex-row justify-between items-end">
                <div class="max-w-2xl">
                    <h2 class="text-3xl font-bold text-slate-900 mb-4">Old Way vs. New Way</h2>
                    <p class="text-slate-600">
                        Comparing traditional `.env` file management against modern ConfigOps platforms.
                    </p>
                </div>
                <div class="mt-4 md:mt-0 bg-white p-1 rounded-lg border border-slate-200 inline-flex">
                    <button onclick="setComparisonFilter('all')" class="filter-btn px-4 py-2 rounded-md text-sm font-medium bg-blue-100 text-blue-700">All</button>
                    <button onclick="setComparisonFilter('security')" class="filter-btn px-4 py-2 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-50">Security</button>
                    <button onclick="setComparisonFilter('scale')" class="filter-btn px-4 py-2 rounded-md text-sm font-medium text-slate-600 hover:bg-slate-50">Scalability</button>
                </div>
            </div>

            <div class="overflow-x-auto rounded-xl shadow-sm border border-slate-200 bg-white">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-slate-100 border-b border-slate-200 text-slate-900">
                            <th class="p-4 font-bold w-1/4">Feature</th>
                            <th class="p-4 font-bold w-1/3 text-slate-500">Legacy (.env / Hardcoded)</th>
                            <th class="p-4 font-bold w-1/3 text-blue-600">ConfigOps (Agent + DB)</th>
                        </tr>
                    </thead>
                    <tbody id="comparison-table-body">
                        <!-- Populated via JS -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Section: ROI Estimator -->
    <section id="roi" class="py-16 bg-white border-t border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="bg-blue-600 rounded-2xl p-8 md:p-12 text-white shadow-xl overflow-hidden relative">
                <div class="absolute top-0 right-0 opacity-10 text-9xl transform translate-x-12 -translate-y-12">
                    <i class="fa-solid fa-calculator"></i>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 relative z-10">
                    <div>
                        <h2 class="text-3xl font-bold mb-4">Calculate Your ROI</h2>
                        <p class="text-blue-100 mb-8">
                            How much time does your team waste debugging config errors? Enter your metrics to estimate the annual savings of adopting an automated ConfigOps solution.
                        </p>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-blue-100 mb-2">Developers on Team</label>
                                <input type="number" id="dev-count" value="20" class="w-full bg-blue-700/50 border border-blue-500 rounded-lg p-3 text-white placeholder-blue-300 focus:ring-2 focus:ring-white focus:outline-none transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-blue-100 mb-2">Hours/Week Debugging Configs (per Dev)</label>
                                <div class="flex items-center gap-4">
                                    <input type="range" id="hours-waste" min="1" max="10" value="4" class="w-full h-2 bg-blue-900 rounded-lg appearance-none cursor-pointer">
                                    <span id="hours-display" class="font-mono text-xl font-bold w-12 text-center">4</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white/10 backdrop-blur-sm rounded-xl p-8 border border-white/20 flex flex-col justify-center items-center text-center">
                        <div class="text-sm uppercase tracking-widest text-blue-200 mb-2">Estimated Annual Savings</div>
                        <div class="text-5xl md:text-6xl font-extrabold mb-2 text-white">
                            $<span id="savings-display">0</span>
                        </div>
                        <div class="text-blue-200 text-sm mb-6">
                            Assuming $100/hr fully loaded dev cost
                        </div>
                        <div class="w-full bg-blue-900/50 rounded-full h-4 overflow-hidden mb-2">
                            <div id="savings-bar" class="h-full bg-amber-400 w-0 transition-all duration-1000"></div>
                        </div>
                        <p class="text-xs text-blue-200">Productivity Recovered</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="mb-4 text-slate-500">
                Synthesis of top GitHub Open Source ConfigOps tools (Configu, Infisical, Dotenv-Vault).
            </p>
            <div class="flex justify-center space-x-6 text-2xl">
                <i class="fa-brands fa-github hover:text-white cursor-pointer transition-colors"></i>
                <i class="fa-brands fa-twitter hover:text-white cursor-pointer transition-colors"></i>
                <i class="fa-solid fa-code hover:text-white cursor-pointer transition-colors"></i>
            </div>
            <p class="mt-8 text-sm text-slate-600">
                &copy; 2025 ConfigOps Report Analysis. Generated for educational purposes.
            </p>
        </div>
    </footer>

    <!-- Visualization & Content Choices: 
         - Goal: Inform -> Outage Chart (Chart.js Pie) to show magnitude of problem.
         - Goal: Explain -> Interactive Diagram (Custom JS/HTML) to simplify complex architecture.
         - Goal: Compare -> Filterable Table (JS) to organize feature sets clearly.
         - Goal: Engage -> ROI Calculator (JS) to provide personal value.
         - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->

    <script>
        // --- State Management ---
        const state = {
            comparisonFilter: 'all',
            roi: {
                devs: 20,
                hours: 4,
                rate: 100
            }
        };

        // --- Data: Comparison Table ---
        const comparisonData = [
            { id: 1, category: 'security', feature: 'Secret Storage', old: 'Plain text (.env) or scattered in Cloud', new: 'Encrypted Vaults / Masked in UI' },
            { id: 2, category: 'scale', feature: 'Validation', old: 'None (Runtime errors)', new: 'Schema-based (Build-time checks)' },
            { id: 3, category: 'scale', feature: 'Versioning', old: 'Git (Unsafe for secrets)', new: 'Configuration Graph History' },
            { id: 4, category: 'security', feature: 'Access Control', old: 'All or nothing', new: 'Role-based (RBAC) per environment' },
            { id: 5, category: 'scale', feature: 'Consistency', old: 'Manual Sync ("Slack me the env")', new: 'Automated Sync via Agent' },
            { id: 6, category: 'all', feature: 'Developer Exp', old: 'Frustrating, opaque', new: 'Centralized Dashboard' }
        ];

        // --- Data: Diagram Details ---
        const diagramDetails = {
            schema: {
                title: "1. The Schema (The Contract)",
                desc: "Code that defines the expected configuration structure. It serves as a contract between the developer and the application, ensuring no required key is missing.",
                list: [
                    "Written in JSON, YAML, or `.cfgu`",
                    "Defines types (String, Number, Boolean)",
                    "Sets validation rules (Regex, Range)",
                    "Lives in the repo with the code"
                ],
                code: `// example.cfgu
{
  "keys": {
    "DB_URL": { "type": "RegEx", "pattern": "^postgres://" },
    "MAX_RETRIES": { "type": "Number", "default": "3" }
  }
}`
            },
            agent: {
                title: "2. The Agent (The Worker)",
                desc: "A lightweight binary or CLI tool that runs in your CI/CD pipeline or local machine. It connects the static Schema to the dynamic Store.",
                list: [
                    "Fetches values from diverse stores",
                    "Validates values against Schema",
                    "Exports to environment variables",
                    "Prevents deployment if config is invalid"
                ],
                code: `// Terminal
$ configu eval --store aws-secrets --schema ./example.cfgu
> Validating... OK
> Exporting vars... DONE`
            },
            store: {
                title: "3. Store & Dashboard (The Brain)",
                desc: "The database stores the actual values (often abstracting underlying providers like AWS/Azure) while the Dashboard visualizes the entire graph.",
                list: [
                    "Centralized visibility of all envs",
                    "Audit logs of who changed what",
                    "Compare Prod vs. Staging",
                    "Manage values without touching code"
                ],
                code: `// Dashboard View
[PROD]
DB_URL: postgres://prod-db... (Encrypted)
MAX_RETRIES: 5

[DEV]
DB_URL: postgres://localhost...
MAX_RETRIES: 3`
            }
        };

        // --- Init Function ---
        document.addEventListener('DOMContentLoaded', () => {
            renderChart();
            renderComparisonTable();
            initROI();
            updateDetail('agent'); // Default view
        });

        // --- Chart.js Implementation ---
        function renderChart() {
            const ctx = document.getElementById('outageChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Configuration Error', 'Code Bug', 'Hardware Failure', 'Security Attack', 'Other'],
                    datasets: [{
                        data: [35, 25, 15, 10, 15], // Representative industry stats
                        backgroundColor: [
                            '#3b82f6', // Blue (Focus)
                            '#94a3b8', // Slate
                            '#cbd5e1', // Light Slate
                            '#f59e0b', // Amber
                            '#e2e8f0'
                        ],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                font: { family: 'sans-serif', size: 12 },
                                boxWidth: 15
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed + '%';
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Primary Causes of Cloud Outages',
                            font: { size: 16, weight: 'bold' },
                            padding: { bottom: 20 }
                        }
                    },
                    cutout: '60%'
                }
            });
        }

        // --- Interaction: Architecture Diagram ---
        function updateDetail(key) {
            const data = diagramDetails[key];
            const panel = document.getElementById('detail-panel');
            
            // Simple fade out/in effect
            panel.style.opacity = '0.5';
            
            setTimeout(() => {
                document.getElementById('detail-title').innerText = data.title;
                document.getElementById('detail-desc').innerText = data.desc;
                
                const listEl = document.getElementById('detail-list');
                listEl.innerHTML = '';
                data.list.forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'flex items-center text-slate-700';
                    li.innerHTML = `<i class="fa-solid fa-check text-green-500 mr-3 text-sm"></i>${item}`;
                    listEl.appendChild(li);
                });

                document.getElementById('detail-code').innerHTML = `<pre class="whitespace-pre-wrap font-mono text-sm">${data.code}</pre>`;
                
                panel.style.opacity = '1';
            }, 200);
        }

        // --- Interaction: Comparison Table ---
        function setComparisonFilter(category) {
            state.comparisonFilter = category;
            
            // Update buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (btn.innerText.toLowerCase().includes(category) || (category === 'all' && btn.innerText === 'All')) {
                    btn.classList.remove('bg-white', 'text-slate-600');
                    btn.classList.add('bg-blue-100', 'text-blue-700');
                } else {
                    btn.classList.add('bg-white', 'text-slate-600');
                    btn.classList.remove('bg-blue-100', 'text-blue-700');
                }
            });

            renderComparisonTable();
        }

        function renderComparisonTable() {
            const tbody = document.getElementById('comparison-table-body');
            tbody.innerHTML = '';

            const filteredData = comparisonData.filter(item => 
                state.comparisonFilter === 'all' || item.category === state.comparisonFilter
            );

            filteredData.forEach(row => {
                const tr = document.createElement('tr');
                tr.className = 'border-b border-slate-100 hover:bg-slate-50 transition-colors';
                tr.innerHTML = `
                    <td class="p-4 font-medium text-slate-900">${row.feature}</td>
                    <td class="p-4 text-slate-500 text-sm border-l border-slate-100">${row.old}</td>
                    <td class="p-4 text-blue-700 text-sm font-semibold border-l border-slate-100 bg-blue-50/30">${row.new}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // --- Interaction: ROI Calculator ---
        function initROI() {
            const devInput = document.getElementById('dev-count');
            const hoursInput = document.getElementById('hours-waste');
            const hoursDisplay = document.getElementById('hours-display');

            const calculate = () => {
                const devs = parseInt(devInput.value) || 0;
                const hours = parseInt(hoursInput.value) || 0;
                state.roi.devs = devs;
                state.roi.hours = hours;
                
                hoursDisplay.innerText = hours;

                // Calculation: Devs * Hours/Week * 52 weeks * Rate ($100)
                const annualSavings = devs * hours * 52 * state.roi.rate;
                
                // Animation for numbers
                animateValue("savings-display", 0, annualSavings, 800);
                
                // Bar animation
                const maxSavings = 1000000; // Cap visual bar at 1M for visual scaling
                const percentage = Math.min((annualSavings / maxSavings) * 100, 100);
                document.getElementById('savings-bar').style.width = `${percentage}%`;
            };

            devInput.addEventListener('input', calculate);
            hoursInput.addEventListener('input', calculate);
            
            // Initial calc
            calculate();
        }

        function animateValue(id, start, end, duration) {
            const obj = document.getElementById(id);
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start).toLocaleString();
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        // --- Navigation ---
        function scrollToSection(id) {
            const el = document.getElementById(id);
            if (el) {
                el.scrollIntoView({ behavior: 'smooth' });
                document.getElementById('mobile-menu').classList.add('hidden');
            }
        }

        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

    </script>
</body>
</html>
